
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Transistor Equivalent Finder Tool - BJT & FET Search | TransistorDatabase</title>
<meta content="Find equivalent transistors by specification. Search NPN, PNP, MOSFETs by VCEO, IC, Package, and more. Instant datasheet matching." name="description"/>
<link href="https://transistordatabase.com/transistor-equivalent-finder-tool.html" rel="canonical"/>
<meta content="index, follow" name="robots"/>

<!-- Shared Styles from your Reference Page -->
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; background: #f5f5f0; color: #2c2417; line-height: 1.6; }
    .container { max-width: 1000px; margin: 0 auto; background: #ffffff; box-shadow: 0 1px 3px rgba(0,0,0,0.05); min-height: 100vh; display: flex; flex-direction: column; }

    header { background: #faf9f6; padding: 16px 24px; border-bottom: 1px solid #e5e3db; display: flex; justify-content: space-between; align-items: center; }
    .logo { font-family: ui-monospace, SFMono-Regular, monospace; font-weight: 700; font-size: 18px; color: #2c2417; text-decoration: none; }

    /* Finder Tool Specific Styles */
    .hero { padding: 32px 24px 20px 24px; background: linear-gradient(135deg, #ffffff 0%, #faf9f6 100%); border-bottom: 1px solid #e5e3db; }
    h1 { font-size: 28px; font-weight: 600; color: #2c2417; margin-bottom: 12px; line-height: 1.2; }
    .instruction-text { font-size: 15px; color: #55524b; max-width: 700px; margin-bottom: 24px; }

    /* Selector Boxes (BJT vs FET) */
    .selector-container { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 32px; max-width: 600px; }
    .selector-card { 
        padding: 20px; border: 2px solid #e5e3db; border-radius: 8px; cursor: pointer; 
        background: #ffffff; transition: all 0.2s ease; position: relative;
    }
    .selector-card h3 { font-size: 18px; margin-bottom: 4px; color: #2c2417; }
    .selector-card p { font-size: 13px; color: #55524b; }
    
    /* Active State (Green Checkmark) */
    .selector-card.active { border-color: #865a2e; background: #fffcf9; box-shadow: 0 2px 8px rgba(134, 90, 46, 0.1); }
    .selector-card.active::after {
        content: "✔"; position: absolute; top: 10px; right: 10px; 
        background: #865a2e; color: white; width: 24px; height: 24px; 
        border-radius: 50%; text-align: center; font-size: 14px; line-height: 24px;
    }
    
    /* Inactive State */
    .selector-card.inactive { opacity: 0.6; filter: grayscale(1); cursor: not-allowed; }

    /* Search Form */
    .search-panel { background: #faf9f6; padding: 24px; border-radius: 8px; border: 1px solid #e5e3db; }
    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 16px; margin-bottom: 20px; }
    
    .input-group { display: flex; flex-direction: column; }
    .input-group label { font-size: 12px; font-weight: 600; color: #55524b; margin-bottom: 6px; text-transform: uppercase; }
    
    .form-control { 
        padding: 10px 12px; border: 1px solid #d4d2ca; border-radius: 6px; 
        font-size: 14px; color: #2c2417; background: #ffffff; width: 100%;
    }
    .form-control:focus { outline: none; border-color: #865a2e; box-shadow: 0 0 0 2px rgba(134, 90, 46, 0.1); }

    .btn { padding: 14px 24px; border-radius: 6px; font-size: 15px; font-weight: 600; text-align: center; transition: 0.2s; border: none; cursor: pointer; display: inline-block; }
    .btn-primary { background: #865a2e; color: white; width: 100%; }
    .btn-primary:hover { background: #6d4925; }
    .btn:disabled { background: #ccc; cursor: not-allowed; }

    /* Results Section */
    .results-container { margin-top: 32px; display: none; /* Hidden by default */ }
    .results-header { 
        display: flex; justify-content: space-between; align-items: center; 
        background: #2c2417; color: white; padding: 12px 16px; border-radius: 6px 6px 0 0; 
    }
    .results-count { font-weight: 600; font-size: 14px; }

    /* Table Styles */
    .table-wrapper { border: 1px solid #e5e3db; border-top: none; border-radius: 0 0 6px 6px; overflow: hidden; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th { text-align: left; padding: 12px 16px; background: #f5f5f0; color: #55524b; font-weight: 600; font-size: 12px; text-transform: uppercase; border-bottom: 1px solid #e5e3db; }
    td { padding: 12px 16px; border-bottom: 1px solid #f0eee8; color: #2c2417; }
    td a { color: #865a2e; text-decoration: underline; font-weight: 700; }
    
    /* Helper Text Section */
    .helper-section { margin-top: 40px; padding: 24px; background: #ffffff; border-top: 1px solid #e5e3db; }
    .helper-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .helper-box h4 { margin-bottom: 8px; color: #865a2e; }
    .helper-box p { font-size: 13px; color: #55524b; }

    /* Footer */
    footer { padding: 32px 24px; background: #2c2417; color: #d4d2ca; text-align: center; font-size: 13px; margin-top: auto; }
    footer a { color: #faf9f6; text-decoration: underline; margin: 0 10px; }

    /* ---------------------------------------------------- */
    /* MOBILE OPTIMIZATION: The Dense Comparative List      */
    /* ---------------------------------------------------- */
    @media (max-width: 768px) {
        .selector-container, .helper-grid { grid-template-columns: 1fr; }
        
        /* Transform Table to Card List */
        .table-wrapper table, .table-wrapper thead, .table-wrapper tbody, .table-wrapper tr, .table-wrapper td {
            display: block;
        }
        
        .table-wrapper thead { display: none; /* Hide header row */ }
        
        .table-wrapper tr {
            display: grid;
            grid-template-columns: 1fr auto; /* Name on left, Specs on right */
            grid-template-areas: 
                "name specs"
                "meta meta";
            padding: 12px 16px;
            border-bottom: 1px solid #e5e3db;
            background: #ffffff;
        }

        /* 1. Part Name (Top Left) */
        td:nth-child(1) { 
            grid-area: name; 
            padding: 0; border: none; 
            font-size: 16px; margin-bottom: 4px;
        }

        /* 2. Type & Package (Hide on mobile to save space) */
        td:nth-child(2), td:nth-child(3) { display: none; }

        /* 3. VCEO & IC (Top Right - The Decision Data) */
        /* We use JavaScript to combine these into one cell for mobile, 
           or use CSS to visually group them if they are separate cells. 
           Here we assume separate cells and position them manually. */
        
        /* VCEO */
        td:nth-child(4) { 
            grid-area: specs; 
            padding: 0; border: none; 
            text-align: right; font-weight: 700; color: #2c2417;
        }
        td:nth-child(4)::after { content: " | "; color: #ccc; font-weight: normal; }

        /* IC - Positioned next to VCEO via float or flex? 
           Actually, CSS Grid areas only take one element. 
           Trick: We will stack them or hide the label. */
        td:nth-child(5) {
            grid-area: specs;
            padding: 0; border: none;
            text-align: right; font-weight: 700;
        }
        /* Logic: Make VCEO stick to IC. 
           Better approach for this specific layout: 
           Use flexbox on the row? No, Grid is safer. 
           Let's just float them right. */
        
        /* 4. Meta Data (Badge/HFE - Bottom Row) */
        td:nth-child(6), td:nth-child(7), td:nth-child(8) {
            grid-area: meta;
            padding: 0; border: none;
            font-size: 12px; color: #777; display: inline-block; margin-right: 10px;
        }
        
        /* Specific adjustments for the "Visual Scan" */
        td[data-label="VCEO"], td[data-label="IC"] {
            grid-area: specs;
            display: inline-block;
            text-align: right;
            padding-left: 8px;
        }
    }
</style>
<link href="/favicon.svg" rel="icon" type="image/svg+xml"/>
</head>
<body>

<div class="container">
    <header>
        <a class="logo" href="index.html">TransistorDatabase</a>
    </header>

    <main>
        <section class="hero">
            <h1>Transistor Equivalent Finder Tool</h1>
            <p class="instruction-text">
                Enter your <strong>minimum requirements</strong> below. The tool will search our database and find all parts that meet or exceed your specifications.
            </p>

            <!-- 1. Selector Switches -->
            <div class="selector-container">
                <div class="selector-card active" id="btn-bjt">
                    <h3>BJT Transistor</h3>
                    <p>NPN / PNP Bipolar Junction</p>
                </div>
                <div class="selector-card inactive" id="btn-fet">
                    <h3>FET / MOSFET</h3>
                    <p>Building dataset... (Coming Soon)</p>
                </div>
            </div>

            <!-- 2. BJT Search Panel -->
            <div class="search-panel" id="bjt-search-panel">
                <div class="form-grid">
                    <!-- Type (Dropdown) -->
                    <div class="input-group">
                        <label>Type *</label>
                        <select class="form-control" id="input-type">
                            <option value="">Any Type</option>
                            <!-- Populated by JSON -->
                        </select>
                    </div>

                    <!-- Package (Dropdown) -->
                    <div class="input-group">
                        <label>Package *</label>
                        <select class="form-control" id="input-package">
                            <option value="">Any Package</option>
                            <!-- Populated by JSON -->
                        </select>
                    </div>

                    <!-- Numeric Fields -->
                    <div class="input-group">
                        <label>Min VCEO (V)</label>
                        <input type="number" step="1" class="form-control" id="input-vceo" placeholder="e.g. 40">
                    </div>

                    <div class="input-group">
                        <label>Min IC (A)</label>
                        <input type="number" step="0.01" class="form-control" id="input-ic" placeholder="e.g. 0.5">
                    </div>

                    <div class="input-group">
                        <label>Min hFE</label>
                        <input type="number" step="1" class="form-control" id="input-hfe" placeholder="e.g. 100">
                    </div>

                    <div class="input-group">
                        <label>Purpose</label>
                        <select class="form-control" id="input-badge">
                            <option value="">Any Purpose</option>
                            <!-- Populated by JSON -->
                        </select>
                    </div>
                </div>

                <button class="btn btn-primary" id="btn-search" onclick="performSearch()">Search Equivalents</button>
                <p id="error-msg" style="color: red; font-size: 13px; margin-top: 10px; display: none;"></p>
            </div>
        </section>

        <!-- 3. Results Section (Hidden by Default) -->
        <section class="results-container" id="results-section">
            <div class="results-header">
                <span class="results-count" id="results-count-text">Found 0 Equivalents</span>
            </div>
            
            <div class="table-wrapper">
                <table id="results-table">
                    <thead>
                        <tr>
                            <th>Part</th>
                            <th>Type</th>
                            <th>Package</th>
                            <th>VCEO</th>
                            <th>IC</th>
                            <th>hFE</th>
                            <th>Pd</th>
                            <th>Badge</th>
                        </tr>
                    </thead>
                    <tbody id="results-body">
                        <!-- Rows injected by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 4. Helper Text -->
        <section class="helper-section">
            <div class="helper-grid">
                <div class="helper-box">
                    <h4>When to choose BJT?</h4>
                    <p>Bipolar Junction Transistors (BJTs) are best for general amplification and standard switching applications. They are current-controlled devices typically used in lower power or linear circuits.</p>
                </div>
                <div class="helper-box">
                    <h4>When to choose FET?</h4>
                    <p>Field Effect Transistors (FETs/MOSFETs) are voltage-controlled devices ideal for high-efficiency switching, power management, and high-frequency applications due to their low on-resistance.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>TransistorDatabase | 2026</p>
        <p style="margin-top:10px;"><a href="index.html">Home</a> · <a href="sitemap.html">Site Map</a></p>
    </footer>
</div>

<!-- JAVASCRIPT LOGIC -->
<script>
    // ==========================================
    // CONFIGURATION
    // ==========================================
    // REPLACE THIS URL WITH YOUR CLOUDFLARE WORKER URL
    const API_URL = "https://transistor-search-api.arunandfibo.workers.dev";
    
    // Global variables to hold loaded JSON data
    let dropdownOptions = {};
    let typePackageMapping = {};

    // ==========================================
    // INITIALIZATION
    // ==========================================
    document.addEventListener("DOMContentLoaded", async () => {
        try {
            // 1. Load Dropdown Options
            const dropdownRes = await fetch('bjt-dropdown-options.json');
            dropdownOptions = await dropdownRes.json();
            
            // 2. Load Mapping Logic
            const mappingRes = await fetch('bjt-type-package-mapping.json');
            typePackageMapping = await mappingRes.json();

            // 3. Populate Initial Dropdowns
            populateSelect('input-type', dropdownOptions.types);
            populateSelect('input-package', dropdownOptions.packages);
            populateSelect('input-badge', dropdownOptions.badges);

            // 4. Setup Event Listener for Smart Filtering
            document.getElementById('input-type').addEventListener('change', handleTypeChange);

        } catch (error) {
            console.error("Failed to load JSON data:", error);
            document.getElementById('error-msg').innerText = "Error loading database options. Please refresh.";
            document.getElementById('error-msg').style.display = 'block';
        }
    });

    // ==========================================
    // UI HELPERS
    // ==========================================
    function populateSelect(elementId, options) {
        const select = document.getElementById(elementId);
        // Keep the first "Any" option
        const firstOption = select.options[0];
        select.innerHTML = ''; 
        select.appendChild(firstOption);

        if (!options) return;

        options.forEach(opt => {
            const el = document.createElement('option');
            el.value = opt;
            el.textContent = opt;
            select.appendChild(el);
        });
    }

    // Smart Filtering: When Type changes, filter Package list
    function handleTypeChange() {
        const selectedType = document.getElementById('input-type').value;
        const packageSelect = document.getElementById('input-package');
        
        // Reset package selection
        packageSelect.value = "";

        if (selectedType && typePackageMapping[selectedType]) {
            // Show only relevant packages
            populateSelect('input-package', typePackageMapping[selectedType]);
        } else {
            // Show all packages if no type selected
            populateSelect('input-package', dropdownOptions.packages);
        }
    }

    // ==========================================
    // SEARCH LOGIC
    // ==========================================
    async function performSearch() {
        const btn = document.getElementById('btn-search');
        const errorMsg = document.getElementById('error-msg');
        const resultsSection = document.getElementById('results-section');
        const tbody = document.getElementById('results-body');

        // Reset UI
        errorMsg.style.display = 'none';
        resultsSection.style.display = 'none';
        tbody.innerHTML = '';
        btn.disabled = true;
        btn.innerText = "Searching...";

        // Gather Inputs
        const criteria = {
            type: document.getElementById('input-type').value,
            package: document.getElementById('input-package').value,
            min_vceo: document.getElementById('input-vceo').value,
            min_ic: document.getElementById('input-ic').value,
            min_hfe: document.getElementById('input-hfe').value,
            badge: document.getElementById('input-badge').value
        };

        // Frontend Validation (Mirroring Backend)
        if (!criteria.type && !criteria.package) {
            showError("Please select at least a Type or a Package.");
            resetBtn();
            return;
        }
        if (!criteria.min_vceo && !criteria.min_ic && !criteria.min_hfe) {
            showError("Please enter at least one numeric requirement (VCEO, IC, or hFE).");
            resetBtn();
            return;
        }

        try {
            // Send Request to Cloudflare Worker
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(criteria)
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.error || "Search failed");
            }

            // Render Results
            renderTable(data, criteria);

        } catch (err) {
            showError("Error: " + err.message);
        } finally {
            resetBtn();
        }
    }

    function renderTable(data, criteria) {
        const resultsSection = document.getElementById('results-section');
        const countText = document.getElementById('results-count-text');
        const tbody = document.getElementById('results-body');

        // Update Summary Bar
        countText.innerText = `Found ${data.total_matches} equivalents`;
        if (data.total_matches > 50) {
            countText.innerText += ` (Showing top 50)`;
        }

        if (data.results.length === 0) {
            showError("No parts found matching your criteria. Try lowering your minimum requirements.");
            return;
        }

        // Build Rows
        data.results.forEach(part => {
            const row = document.createElement('tr');
            
            // Generate link (if URL exists, otherwise just text)
            const partLink = part.url ? `<a href="${part.url}" target="_blank">${part.part}</a>` : part.part;

            row.innerHTML = `
                <td>${partLink}</td>
                <td>${part.type || '-'}</td>
                <td>${part.package || '-'}</td>
                <td data-label="VCEO">${part.vceo ? part.vceo + 'V' : '-'}</td>
                <td data-label="IC">${part.ic ? part.ic + 'A' : '-'}</td>
                <td data-label="hFE">${part.hfe ? part.hfe : '-'}</td>
                <td data-label="Pd">${part.pd ? part.pd + 'W' : '-'}</td>
                <td data-label="Badge" style="font-size:12px; color:#666;">${part.badge || ''}</td>
            `;
            tbody.appendChild(row);
        });

        resultsSection.style.display = 'block';
    }

    function showError(msg) {
        const el = document.getElementById('error-msg');
        el.innerText = msg;
        el.style.display = 'block';
    }

    function resetBtn() {
        const btn = document.getElementById('btn-search');
        btn.disabled = false;
        btn.innerText = "Search Equivalents";
    }
</script>

</body>
</html>